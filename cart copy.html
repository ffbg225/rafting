
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Maven+Pro:wght@400..900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
  <!-- Add this script tag to both shopping mart.html and cart.html -->
  <script src="popup.js"></script>
</head>

<body>
  <div class="loader-container" id="loader">
    <div class="loader"></div>
  </div>

  <!-- Main Content (hidden initially) -->
  <div class="main-content" id="main-content" style="display: none;">
    <!-- Your existing webpage content here -->
    <div class="container2">
      <div class="video-container">
        <video autoplay loop muted playsinline class="background-video">
          <source src="images/mart.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
  

  <!-- Nav bar -->
  <div>
    <nav class="navbar navbar-expand-lg" style="background-color: #071349;border-radius: 50px;width: 92%;height: 50px;margin-left: 55px;margin-top: 10px; border-top-right-radius: 10px;
                border-bottom-left-radius: 10px;">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"><img src="images/logo.png" style="width: 50px;"></a>
        <h4 class="wethu" style="font-family: 'Bona Nova SC', serif; font-weight: 400; color: white;">
          Kithulgala_Water_Rafting....</h4>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0"
            style="margin-left: 100px;display: flex; flex-direction: row;gap:20px">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#" style="color: white;">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#" style="color: white;">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" style="color: white;">Activity_Plans</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"
                style="color: white;">
                Go Mart
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="shopping mart.html">All</a></li>
                <li><a class="dropdown-item" href="#">Biscuts</a></li>
                <li><a class="dropdown-item" href="#">Cool Drinks</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#">Bath Items</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#" style="color: white;">Contact_Us</a>
            </li>
            <li class="nav-item">
              <button style="border-radius: 50px;background-color: blue;height: 40px;width: 130px; display: flex;margin-left: -15px;border: none;
                border-top-right-radius: 10px;
                border-bottom-left-radius: 10px;"><a class="nav-link active" aria-current="page" href="#"
                  style="color: white;font-size: 15px; ">Booking Now</a></button>
            </li>
          </ul>

        </div>
      </div>
    </nav>
  </div>


  <div class="shadow-lg p-3 mb-5 bg-body-tertiary rounded"
    style="position: relative; width: 70%; margin-left: 180px; margin-top: 20px; height: 500px; background-image: url('images/cart_bg.jpeg'); background-color: rgba(0, 0, 0, 0.763); background-size: cover; background-position: center;">

    <!-- white Bar -->
    <div class="white-bar">
      <div style="display: flex;flex-direction: column;">
      <div style="display: flex; flex-direction: row;gap:45px; margin-left: 35px;">
        <a href="calender.html"> <img src="images/calender.png" class="icons"></a>
        <img src="images/line.png" class="lines" style="margin-top: 20px;">
        <img src="images/cart.png" class="icons"
          style="filter: invert(0%) sepia(2%) saturate(13%) hue-rotate(57deg) brightness(104%) contrast(101%);">
        <img src="images/line.png" class="lines" style="margin-top: 20px;">
        <a href="booking_info.html"><img src="images/booking.png" class="icons"></a>
        <img src="images/line.png" class="lines" style="margin-top: 20px;">
        <img src="images/payment.png" class="icons">

      </div>
      
      <div class="div_h3" style="display: flex;flex-direction: row; gap: 140px;margin-left: 20px;margin-top: 2px;">
        <h3>TRAVEL DATE</h3>
        <h3>CART</h3>
        <h3>BOOKING INFO</h3>
        <h3>PAYMENT</h3>
      </div>

    </div>
  </div>
    <!-- white Bar -->
    <div style="display: flex;flex-direction: row;gap: 40px;">
      <div class="white-bar-2">
        <div class="ash-bar-1">
          <h4 class="h4_ash">Order Items</h4>

        </div>
        <div id="cart-items-container"></div> <!-- Container for cart items -->
        <button style="border: none; border-top-left-radius: 10px; border-bottom-right-radius: 10px; background-color: #071349; color: white; margin-top: 10px; margin-left: 30px;" class="bbb_u" id="add-item-button">
          <a href="shopping mart.html" style="color: white; text-decoration: none;">
              <img src="images/plus.png" alt="" style="width: 20px; height: 20px;"> ADD ITEM
          </a>
      </button>
      
      <script>
         document.getElementById("add-item-button").addEventListener("click", (e) => {
  e.preventDefault();
  window.location.href = "shopping mart.html";
});
      </script>
    </div>
      <div class="white-bar-3">
        <div class="ash-bar-2">
          <h4 class="h4_ash">Cart_Summary</h4>
        </div>
        <div style="display: flex;flex-direction: row;">
       <div style="margin-top: 20px;margin-left: 10px;"> <h6 style="font-weight: 600;">Shopping-Mart-Items</h6></div>
        <div class="total-price-cart" style="padding: 20px; font-size: 18px; font-weight: bold;">
          Rs 0.00 <!-- Default total price -->
      </div>
    </div>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>


  <script>
  
  document.addEventListener('DOMContentLoaded', () => {
  const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
  const cartItemsContainer = document.getElementById('cart-items-container');
  const totalPriceContainer = document.querySelector('.total-price-cart');

  // Function to calculate the total price
  const calculateTotalPrice = () => {
    return cartItems.reduce((total, item) => {
      // Extract numeric price value (handles both Rs and $)
      const priceValue = parseFloat(item.price.toString().replace(/[^\d.]/g, ''));
      const quantity = parseInt(item.quantity, 10);
      
      // If price is in dollars, convert to rupees (assuming 1 USD = 300 LKR)
      const isDollar = item.price.toString().includes('$');
      const priceInRs = isDollar ? priceValue * 300 : priceValue;
      
      return total + (priceInRs * quantity);
    }, 0);
  };

  // Function to render cart items and update total price
  const renderCartItems = () => {
    cartItemsContainer.innerHTML = ''; // Clear the container
    
    if (cartItems.length === 0) {
      cartItemsContainer.innerHTML = '<p>No items in cart</p>';
      totalPriceContainer.textContent = 'Rs 0.00';
      return;
    }

    cartItems.forEach((item, index) => {
      const cartItem = document.createElement('div');
      cartItem.classList.add('cart-item');
      cartItem.style.marginBottom = '10px';
      cartItem.style.padding = '10px';
      cartItem.style.borderBottom = '1px solid #eee';

      cartItem.innerHTML = `
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div style="display: flex; align-items: center; gap: 10px;">
            <img src="${item.image}" alt="${item.title}" style="width: 50px; height: 50px; border-radius: 5px; object-fit: cover;">
            <div>
              <p style="margin: 0; font-weight: 500;">${item.title}</p>
              <p style="margin: 0; color: #666;">${item.quantity} x ${item.price}</p>
            </div>
          </div>
          <button class="delete-btn" data-index="${index}" style="background: none; border: none; cursor: pointer; color: #ff6b6b;">
            <i class="ri-delete-bin-line"></i>
          </button>
        </div>
      `;
      cartItemsContainer.appendChild(cartItem);
    });

    // Update the total price
    const totalPrice = calculateTotalPrice();
    const savedCurrency = localStorage.getItem('currency') || 'Rs';
    const conversionRate = 300; // 1 USD = 300 LKR

    if (savedCurrency === '$') {
      totalPriceContainer.textContent = `$${(totalPrice / conversionRate).toFixed(2)}`;
    } else {
      totalPriceContainer.textContent = `Rs ${totalPrice.toFixed(2)}`;
    }
  };

  // Initial render
  renderCartItems();

  // Add event listeners for delete buttons
  cartItemsContainer.addEventListener('click', (event) => {
    if (event.target.closest('.delete-btn')) {
      const index = event.target.closest('.delete-btn').dataset.index;
      cartItems.splice(index, 1);
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      renderCartItems();
      
      // Update cart count in localStorage (if needed)
      const cartCount = cartItems.reduce((total, item) => total + item.quantity, 0);
      localStorage.setItem('cartCount', cartCount);
    }
  });
});
  </script>
 <script>
  document.addEventListener('DOMContentLoaded', () => {
      const savedCurrency = localStorage.getItem('currency') || 'Rs';
      const conversionRate = 300; // 1 USD = 300 LKR
  
      // Function to update prices based on currency
      function updatePrices(currency) {
          const prices = document.querySelectorAll('.cart-price, .total-price, .total-price-cart');
  
          prices.forEach(priceElement => {
              let priceText = priceElement.textContent;
              if (currency === '$') {
                  if (priceText.includes('Rs')) {
                      let priceValue = parseFloat(priceText.replace('Rs', '').trim());
                      let convertedPrice = (priceValue / conversionRate).toFixed(2);
                      priceElement.textContent = `$ ${convertedPrice}`;
                  }
              } else {
                  if (priceText.includes('$')) {
                      let priceValue = parseFloat(priceText.replace('$', '').trim());
                      let convertedPrice = (priceValue * conversionRate).toFixed(2);
                      priceElement.textContent = `Rs ${convertedPrice}`;
                  }
              }
          });
      }
  
      // Apply saved currency preference
      updatePrices(savedCurrency);
  });
  </script>
    <div style="background-color: rgba(0, 0, 0, 0.795);width: 100%;height: 30px; position: relative;margin-top: 510px;">
      <h6 class="footer_h6" >© 2025 Kitulgala WB Camp- Kitulgala Adventures in Sri Lanka </h6>
    </div>
  
    <script>
      // Hide the loader and show the main content after 10 seconds
      setTimeout(() => {
        const loader = document.getElementById('loader');
        const mainContent = document.getElementById('main-content');
    
        if (loader && mainContent) {
          loader.style.display = 'none'; // Hide loader
          mainContent.style.display = 'block'; // Show main content
        }
      }, 2000); // 2 seconds = 2000 milliseconds
    </script>
</body>

</html>